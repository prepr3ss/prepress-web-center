<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prepress Impact</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* Page Header dengan gradient orange seperti template CTP lainnya */
        .page-header {
            background: linear-gradient(135deg, #ff9500 0%, #ff6b00 100%);
            color: white;
            padding: 2rem 0;
            margin: -1rem -15px 2rem -15px;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 20px rgba(255, 149, 0, 0.2);
        }

        /* Scrollbar styling dengan tema orange */
        .table-responsive-kartu-stock::-webkit-scrollbar {
            height: 8px;
        }
        
        .table-responsive-kartu-stock::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .table-responsive-kartu-stock::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ff9500 0%, #ff6b00 100%);
            border-radius: 4px;
        }
        
        .table-responsive-kartu-stock-kartu-stock::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ff6b00 0%, #ff4500 100%);
        }

        /* Input group styling */
        .input-group .form-control {
            border-right: none;
        }
        
        .input-group .btn-outline-secondary {
            border-left: none;
            border-color: #e9ecef;
            background: #f8f9fa;
        }
        
        .input-group .btn-outline-secondary:hover {
            background: #e9ecef;
            border-color: #dee2e6;
        }
                
        .form-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: #6c757d;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.25rem;
        }
        
        /* Filter section styling */
        .filter-section {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }
        
        /* Table styling */
        .table-responsive-kartu-stock {
            width: 48%;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            overflow: hidden;
            background: white;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .stock-table {
            margin-bottom: 0;
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .stock-table thead th {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: none;
            font-weight: 600;
            color: #495057;
            padding: 1rem 0.75rem;
            text-align: center;
            vertical-align: middle;
        }

        .stock-table tbody td {
            vertical-align: middle;
            padding: 0.75rem;
            border: 1px solid #dee2e6;
            font-size: 0.9rem;
            text-align: center;
        }

        .stock-table tbody tr:hover {
            background-color: rgba(255, 149, 0, 0.05);
        }

        .stock-table tbody td:first-child {
            text-align: left;
            font-weight: 500;
        }

        .brand-logo-container {
            padding: 20px;
            padding-bottom: 19px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #dee2e6;
        }

        .brand-logo-container-saphira {
            padding: 19.1px 20px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #dee2e6;
        }

        .brand-logo {
            display: flex;
            align-items: center;
        }

        .stock-confirmation-status {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-left: 20px;
        }

        /* Confirmation styles removed */

        .date-display {
            font-size: 1rem;
            color: #374151;
            font-weight: 500;
            margin-bottom: 1rem;
            text-align: right;
        }

        .shift-display {
            font-size: 1rem;
            color: #374151;
            font-weight: 500;
            margin-bottom: 1rem;
            text-align: right;
        }        

        .mb-5 {
            margin-bottom: 2rem !important;
        }

        /* Form controls styling */
        .form-select, .form-control {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 0.75rem 1rem;
            transition: all 0.3s ease;
        }
        
        .form-select:focus, .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        
        .btn-export-csv {
            background: linear-gradient(135deg, #06b406 0%, #008000 100%);
            color: white;
        }

        /* Toast styling */
        .toast {
            border: none;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .toast-body {
            border-radius: 12px;
            padding: 1rem;
        }

        /* Loading Spinner */
        .spinner-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .spinner-content {
            background: white;
            padding: 2rem;
            border-radius: 0.5rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        /* Pagination styling dengan tema CTP orange */
        .pagination .page-link {
            border: 2px solid #e9ecef;
            color: #6c757d;
            border-radius: 8px;
            margin: 0 2px;
            padding: 0.5rem 0.75rem;
            transition: all 0.3s ease;
        }
        
        .pagination .page-link:hover {
            border-color: #ff9500;
            color: #ff9500;
            background-color: rgba(255, 149, 0, 0.1);
        }
        
        .pagination .page-item.active .page-link {
            background: linear-gradient(135deg, #ff9500 0%, #ff6b00 100%);
            border-color: #ff9500;
            color: white;
        }
    </style>
</head>
<body>
    <div class="d-flex" id="wrapper">
        {% include '_sidebar.html' %}
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="container-fluid">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h2 class="mb-1 text-white">Kartu Stock CTP</h2>
                                <p class="mb-0 opacity-75">Data Kartu Stock CTP</p>
                            </div>
                            <div class="text-end">
                                {% if current_user.role == 'admin' %}
                                <button onclick="showInitialStockModal()" class="btn btn-primary me-2">
                                    <i class="fas fa-clipboard-check me-1"></i> Input Stok Awal
                                </button>
                                {% endif %}
                                    <button onclick="showExportModal()" class="btn btn-success me-2">
                                    <i class="fas fa-file-excel me-1"></i> Export Data
                                </button>
                                <button onclick="showInputIncomingModal()" class="btn btn-light">
                                    <i class="fas fa-plus-circle me-1"></i> Input Incoming Stock
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Filter Controls -->
                <div class="filter-section">
                    <div class="row align-items-end g-3">
                        <div class="col-md-2">
                            <label for="stockDate" class="form-label">Filter Tanggal/Bulan/Tahun</label>
                            <input type="date" class="form-control form-control-clean" id="stockDate" onchange="updateData()" required>
                        </div>
                        <div class="col-md-2">
                            <label for="shiftFilter" class="form-label">Filter Shift</label>
                            <select class="form-select" id="shiftFilter" onchange="updateData()">
                                <option value="1">Shift 1</option>
                                <option value="2">Shift 2</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- Tables Container -->
                <div class="d-flex justify-content-between">
                    <div class="table-responsive-kartu-stock">
                        <div class="brand-logo-container">
                            <div class="brand-logo">
                                <img src="{{ url_for('static', filename='img/Fujifilm_logo.svg') }}" alt="Fuji" style="height: 28px;">
                            </div>
                            <div class="date-shift-container">
                                <div class="date-display" id="fujiDateDisplay"></div>
                                <div class="shift-display" id="fujiShiftDisplay"></div>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover align-middle stock-table mb-5" id="kartuStockPlateFujiTable">
                                <thead>
                                    <tr>
                                        <th rowspan="2">Item Name</th>
                                        <th colspan="2">Stock Awal</th>
                                        <th colspan="1">Pemakaian</th>
                                        <th colspan="1">Incoming</th>
                                        <th colspan="2">Stock Akhir</th>
                                    </tr>
                                    <tr>
                                        <th>BOX</th>
                                        <th>PCS</th>
                                        <th>PCS</th>
                                        <th>BOX</th>
                                        <th>BOX</th>
                                        <th>PCS</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-049-000-0000008">
                                        <td>FUJI 1030</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-023-000-0000007">
                                        <td>FUJI 1030 UV</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000010">
                                        <td>FUJI 1055</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000012">
                                        <td>FUJI 1055 UV</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000013">
                                        <td>FUJI 1055 LHPL</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000009">
                                        <td>FUJI 1630</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="table table-bordered table-hover align-middle stock-table" id="kartuStockChemicalFujiTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Stock Awal GLN</th>
                                        <th>Pemakaian GLN</th>
                                        <th>Incoming GLN</th>
                                        <th>Stock Akhir GLN</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-005-000-0000153">
                                        <td>FUJI DEVELOPER</td>
                                        <td data-field="jumlah_stock_awal">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir">0</td>
                                    </tr>
                                    <tr data-item-code="02-005-000-0000154">
                                        <td>FUJI REPLENISHER</td>
                                        <td data-field="jumlah_stock_awal">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="table-responsive-kartu-stock">
                        <div class="brand-logo-container-saphira">
                            <div class="brand-logo">
                                <img src="{{ url_for('static', filename='img/Heidelberger-Druckmaschinen-New.svg') }}" alt="Saphira" style="height: 48px;">
                            </div>
                            <div class="date-shift-container">
                                <div class="date-display" id="saphiraDateDisplay"></div>
                                <div class="shift-display" id="saphiraShiftDisplay"></div>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover align-middle stock-table mb-5" id="kartuStockPlateSaphiraTable">
                                <thead>
                                    <tr>
                                        <th rowspan="2">Item Name</th>
                                        <th colspan="2">Stock Awal</th>
                                        <th colspan="1">Pemakaian</th>
                                        <th colspan="1">Incoming</th>
                                        <th colspan="2">Stock Akhir</th>
                                    </tr>
                                    <tr>
                                        <th>BOX</th>
                                        <th>PCS</th>
                                        <th>PCS</th>
                                        <th>BOX</th>
                                        <th>BOX</th>
                                        <th>PCS</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-049-000-0000002">
                                        <td>SAPHIRA 1030</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000003">
                                        <td>SAPHIRA 1055</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000011">
                                        <td>SAPHIRA 1055 PN</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000001">
                                        <td>SAPHIRA 1630</td>
                                        <td data-field="jumlah_stock_awal_box">0</td>
                                        <td data-field="jumlah_stock_awal_pcs">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir_box">0</td>
                                        <td data-field="jumlah_stock_akhir_pcs">0</td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <table class="table table-bordered table-hover align-middle stock-table" id="kartuStockChemicalSaphiraTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Stock Awal GLN</th>
                                        <th>Pemakaian GLN</th>
                                        <th>Incoming GLN</th>
                                        <th>Stock Akhir GLN</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-005-000-0000061">
                                        <td>SAPHIRA DEVELOPER</td>
                                        <td data-field="jumlah_stock_awal">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir">0</td>
                                    </tr>
                                    <tr data-item-code="02-005-000-0000046">
                                        <td>SAPHIRA REPLENISHER</td>
                                        <td data-field="jumlah_stock_awal">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir">0</td>
                                    </tr>
                                    <tr data-item-code="02-005-000-0000158">
                                        <td>SAPHIRA GUM</td>
                                        <td data-field="jumlah_stock_awal">0</td>
                                        <td data-field="jumlah_pemakaian">0</td>
                                        <td data-field="jumlah_incoming">0</td>
                                        <td data-field="jumlah_stock_akhir">0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <nav class="mt-3">
                    <ul class="pagination justify-content-center" id="pagination"></ul>
                </nav>
            </div>
        </div>
    </div>
</div>

<!-- Modal Input Stok Awal -->
<div class="modal fade" id="initialStockModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Input Stok Awal</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="initialStockDate" class="form-label">Tanggal</label>
                    <input type="date" class="form-control" id="initialStockDate" required>
                </div>
                <div class="row">
                    <!-- Fuji Plates -->
                    <div class="col-md-6">
                        <h6>FUJI PLATE</h6>
                        <div class="table-responsive">
                            <table class="table table-bordered" id="fujiPlateTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Box</th>
                                        <th>PCS</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-049-000-0000008" data-pcs-per-box="30">
                                        <td>PLATE FUJI 1030</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="fuji"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="fuji"></td>
                                    </tr>
                                    <tr data-item-code="02-023-000-0000007" data-pcs-per-box="30">
                                        <td>PLATE FUJI 1030 UV</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="fuji"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="fuji"></td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000010" data-pcs-per-box="30">
                                        <td>PLATE FUJI 1055</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="fuji"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="fuji"></td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000012" data-pcs-per-box="30">
                                        <td>PLATE FUJI 1055 UV</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="fuji"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="fuji"></td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000013" data-pcs-per-box="30">
                                        <td>PLATE FUJI 1055 LH-PL</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="fuji"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="fuji"></td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000009" data-pcs-per-box="15">
                                        <td>PLATE FUJI 1630</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="fuji"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="fuji"></td>
                                    </tr>                                                                                                                                                  
                                    <!-- Add other Fuji plates here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <h6 class="mt-3">FUJI CHEMICAL</h6>
                        <div class="table-responsive">
                            <table class="table table-bordered" id="fujiChemicalTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Jumlah (GLN)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-005-000-0000153">
                                        <td>DEVELOPER FUJI</td>
                                        <td><input type="number" class="form-control form-control-sm chemical-input" data-brand="fuji"></td>
                                    </tr>
                                    <tr data-item-code="02-005-000-0000154">
                                        <td>REPLENISHER FUJI</td>
                                        <td><input type="number" class="form-control form-control-sm chemical-input" data-brand="fuji"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Saphira Plates -->
                    <div class="col-md-6">
                        <h6>SAPHIRA PLATE</h6>
                        <div class="table-responsive">
                            <table class="table table-bordered" id="saphiraPlateTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Box</th>
                                        <th>PCS</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-049-000-0000002" data-pcs-per-box="50">
                                        <td>SAPHIRA 1030</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="saphira"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="saphira"></td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000003" data-pcs-per-box="50">
                                        <td>SAPHIRA 1055</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="saphira"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="saphira"></td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000011" data-pcs-per-box="40">
                                        <td>SAPHIRA 1055 PN</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="saphira"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="saphira"></td>
                                    </tr>
                                    <tr data-item-code="02-049-000-0000001" data-pcs-per-box="30">
                                        <td>SAPHIRA 1630</td>
                                        <td><input type="number" class="form-control form-control-sm plate-box-input" data-brand="saphira"></td>
                                        <td><input type="number" class="form-control form-control-sm plate-pcs-input" data-brand="saphira"></td>
                                    </tr>                                                                         
                                    <!-- Add other Saphira plates here -->
                                </tbody>
                            </table>
                        </div>

                        <h6 class="mt-3">SAPHRIA CHEMICAL</h6>
                        <div class="table-responsive">
                            <table class="table table-bordered" id="saphiraChemicalTable">
                                <thead>
                                    <tr>
                                        <th>Item Name</th>
                                        <th>Jumlah (GLN)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-item-code="02-005-000-0000061">
                                        <td>SAPHIRA DEVELOPER</td>
                                        <td><input type="number" class="form-control form-control-sm chemical-input" data-brand="saphira"></td>
                                    </tr>
                                    <tr data-item-code="02-005-000-0000046">
                                        <td>SAPHIRA REPLENISHER</td>
                                        <td><input type="number" class="form-control form-control-sm chemical-input" data-brand="saphira"></td>
                                    </tr>
                                    <tr data-item-code="02-005-000-0000158">
                                        <td>SAPHIRA GUM</td>
                                        <td><input type="number" class="form-control form-control-sm chemical-input" data-brand="saphira"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                <button type="button" class="btn btn-primary" onclick="submitInitialStock()">Simpan</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Input Incoming Stock -->
<div class="modal fade" id="incomingStockModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Input Incoming Stock</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row g-3 mb-3">
                    <div class="col-md-4">
                        <label for="incomingStockDate" class="form-label">Tanggal</label>
                        <input type="date" class="form-control" id="incomingStockDate" required>
                    </div>
                    <div class="col-md-4">
                        <label for="shiftSelect" class="form-label">Shift</label>
                        <select class="form-select" id="shiftSelect">
                            <option value="1">Shift 1</option>
                            <option value="2">Shift 2</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="brandSelect" class="form-label">Brand</label>
                        <select class="form-select" id="brandSelect">
                            <option value="fuji" selected>Fuji</option>
                            <option value="saphira">Saphira</option>
                        </select>
                    </div>
                </div>
                
                <div id="fujiContent" class="brand-content">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Fuji Plates</h6>
                            <div class="table-responsive">
                                <table class="table table-bordered" id="fujiPlateIncomingTable">
                                    <thead>
                                        <tr class="table-primary">
                                            <th>Item Name</th>
                                            <th>Box</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr data-item-code="02-049-000-0000008" data-pcs-per-box="30">
                                            <td>PLATE FUJI 1030</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="fuji"></td>
                                        </tr>
                                        <tr data-item-code="02-023-000-0000007" data-pcs-per-box="30">
                                            <td>PLATE FUJI 1030 UV</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="fuji"></td>
                                        </tr>
                                        <tr data-item-code="02-049-000-0000010" data-pcs-per-box="30">
                                            <td>PLATE FUJI 1055</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="fuji"></td>
                                        </tr>
                                        <tr data-item-code="02-049-000-0000012" data-pcs-per-box="30">
                                            <td>PLATE FUJI 1055 UV</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="fuji"></td>
                                        </tr>
                                        <tr data-item-code="02-049-000-0000013" data-pcs-per-box="30">
                                            <td>PLATE FUJI 1055 LH-PL</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="fuji"></td>
                                        </tr>
                                        <tr data-item-code="02-049-000-0000009" data-pcs-per-box="15">
                                            <td>PLATE FUJI 1630</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="fuji"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <h6>Fuji Chemicals</h6>
                            <div class="table-responsive">
                                <table class="table table-bordered" id="fujiChemicalIncomingTable">
                                    <thead>
                                        <tr class="table-info">
                                            <th>Item Name</th>
                                            <th>Jumlah (GLN)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr data-item-code="02-005-000-0000153">
                                            <td>DEVELOPER FUJI</td>
                                            <td><input type="number" class="form-control form-control-sm chemical-incoming-input" data-brand="fuji"></td>
                                        </tr>
                                        <tr data-item-code="02-005-000-0000154">
                                            <td>REPLENISHER FUJI</td>
                                            <td><input type="number" class="form-control form-control-sm chemical-incoming-input" data-brand="fuji"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="saphiraContent" class="brand-content" style="display: none;">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Saphira Plates</h6>
                            <div class="table-responsive">
                                <table class="table table-bordered" id="saphiraPlateIncomingTable">
                                    <thead>
                                        <tr class="table-primary">
                                            <th>Item Name</th>
                                            <th>Box</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr data-item-code="02-049-000-0000002" data-pcs-per-box="50">
                                            <td>SAPHIRA 1030</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="saphira"></td>
                                        </tr>
                                        <tr data-item-code="02-049-000-0000003" data-pcs-per-box="50">
                                            <td>SAPHIRA 1055</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="saphira"></td>
                                        </tr>
                                        <tr data-item-code="02-049-000-0000011" data-pcs-per-box="40">
                                            <td>SAPHIRA 1055 PN</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="saphira"></td>
                                        </tr>
                                        <tr data-item-code="02-049-000-0000001" data-pcs-per-box="30">
                                            <td>SAPHIRA 1630</td>
                                            <td><input type="number" class="form-control form-control-sm incoming-box-input" data-brand="saphira"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <h6>Saphira Chemicals</h6>
                            <div class="table-responsive">
                                <table class="table table-bordered" id="saphiraChemicalIncomingTable">
                                    <thead>
                                        <tr class="table-info">
                                            <th>Item Name</th>
                                            <th>Jumlah (GLN)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr data-item-code="02-005-000-0000061">
                                            <td>SAPHIRA DEVELOPER</td>
                                            <td><input type="number" class="form-control form-control-sm chemical-incoming-input" data-brand="saphira"></td>
                                        </tr>
                                        <tr data-item-code="02-005-000-0000046">
                                            <td>SAPHIRA REPLENISHER</td>
                                            <td><input type="number" class="form-control form-control-sm chemical-incoming-input" data-brand="saphira"></td>
                                        </tr>
                                        <tr data-item-code="02-005-000-0000158">
                                            <td>SAPHIRA GUM</td>
                                            <td><input type="number" class="form-control form-control-sm chemical-incoming-input" data-brand="saphira"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                <button type="button" class="btn btn-primary" onclick="submitIncomingStock()">Simpan</button>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/sidebar_handler.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Inisialisasi modal
    let initialStockModal;
    let incomingStockModal;
    
    document.addEventListener('DOMContentLoaded', function() {
        initialStockModal = new bootstrap.Modal(document.getElementById('initialStockModal'));
        incomingStockModal = new bootstrap.Modal(document.getElementById('incomingStockModal'));
    });

    function showInitialStockModal() {
        // Reset form
        document.getElementById('initialStockDate').value = '';
        document.querySelectorAll('.plate-box-input, .plate-pcs-input, .chemical-input').forEach(input => {
            input.value = '';
        });
        initialStockModal.show();
    }

    function showInputIncomingModal() {
        // Reset form
        document.getElementById('incomingStockDate').value = '';
        document.getElementById('shiftSelect').value = '1';
        document.querySelectorAll('.incoming-box-input, .chemical-incoming-input').forEach(input => {
            input.value = '';
        });
        incomingStockModal.show();
    }

    function submitInitialStock() {
        const date = document.getElementById('initialStockDate').value;
        if (!date) {
            showToast('error', 'Tanggal harus diisi');
            return;
        }

        const stockData = {
            date: date,
            fuji: {
                plates: [],
                chemicals: []
            },
            saphira: {
                plates: [],
                chemicals: []
            }
        };

        // Collect data from Fuji Plate table
        document.querySelectorAll('#fujiPlateTable tr[data-item-code]').forEach(row => {
            const itemCode = row.dataset.itemCode;
            const pcsPerBox = parseInt(row.dataset.pcsPerBox) || 0;
            const boxInput = row.querySelector('.plate-box-input');
            const pcsInput = row.querySelector('.plate-pcs-input');
            
            if (boxInput && pcsInput) {
                const boxValue = parseInt(boxInput.value) || 0;
                const pcsValue = parseInt(pcsInput.value) || 0;
                const totalPcs = (boxValue * pcsPerBox) + pcsValue;
                
                if (totalPcs > 0) {
                    stockData.fuji.plates.push({
                        item_code: itemCode,
                        item_name: row.querySelector('td:first-child').textContent.trim(),
                        jumlah_stock_awal: totalPcs,
                        jumlah_per_box: pcsPerBox
                    });
                }
            }
        });

        // Collect data from Fuji Chemical table
        document.querySelectorAll('#fujiChemicalTable tr[data-item-code]').forEach(row => {
            const itemCode = row.dataset.itemCode;
            const input = row.querySelector('.chemical-input');
            
            if (input) {
                const value = parseInt(input.value) || 0;
                if (value > 0) {
                    stockData.fuji.chemicals.push({
                        item_code: itemCode,
                        item_name: row.querySelector('td:first-child').textContent.trim(),
                        jumlah_stock_awal: value
                    });
                }
            }
        });

        // Collect data from Saphira Plate table
        document.querySelectorAll('#saphiraPlateTable tr[data-item-code]').forEach(row => {
            const itemCode = row.dataset.itemCode;
            const pcsPerBox = parseInt(row.dataset.pcsPerBox) || 0;
            const boxInput = row.querySelector('.plate-box-input');
            const pcsInput = row.querySelector('.plate-pcs-input');
            
            if (boxInput && pcsInput) {
                const boxValue = parseInt(boxInput.value) || 0;
                const pcsValue = parseInt(pcsInput.value) || 0;
                const totalPcs = (boxValue * pcsPerBox) + pcsValue;
                
                if (totalPcs > 0) {
                    stockData.saphira.plates.push({
                        item_code: itemCode,
                        item_name: row.querySelector('td:first-child').textContent.trim(),
                        jumlah_stock_awal: totalPcs,
                        jumlah_per_box: pcsPerBox
                    });
                }
            }
        });

        // Collect data from Saphira Chemical table
        document.querySelectorAll('#saphiraChemicalTable tr[data-item-code]').forEach(row => {
            const itemCode = row.dataset.itemCode;
            const input = row.querySelector('.chemical-input');
            
            if (input) {
                const value = parseInt(input.value) || 0;
                if (value > 0) {
                    stockData.saphira.chemicals.push({
                        item_code: itemCode,
                        item_name: row.querySelector('td:first-child').textContent.trim(),
                        jumlah_stock_awal: value
                    });
                }
            }
        });

        // Send to server
        fetch('/api/input-initial-stock', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(stockData)
        })
        .then(response => {
            if (response.ok) {
                showToast('success', 'Stok awal berhasil disimpan');
                initialStockModal.hide();
                updateData(); // Refresh the main table
            } else {
                throw new Error('Failed to save initial stock');
            }
        })
        .catch(error => {
            console.error('Error saving initial stock:', error);
            showToast('error', 'Gagal menyimpan stok awal');
        });
    }

    document.addEventListener('DOMContentLoaded', function() {
        const brandSelect = document.getElementById('brandSelect');
        const fujiContent = document.getElementById('fujiContent');
        const saphiraContent = document.getElementById('saphiraContent');

        // This is the new, crucial part of the code.
        // It listens for a change on the brand dropdown.
        brandSelect.addEventListener('change', function() {
            if (this.value === 'fuji') {
                fujiContent.style.display = 'block';
                saphiraContent.style.display = 'none';
            } else if (this.value === 'saphira') {
                fujiContent.style.display = 'none';
                saphiraContent.style.display = 'block';
            }
        });

        // Your existing submitIncomingStock function, which is already correct.
        window.submitIncomingStock = function() {
            const date = document.getElementById('incomingStockDate').value;
            const shift = document.getElementById('shiftSelect').value;
            const brand = document.getElementById('brandSelect').value;
            
            if (!date) {
                showToast('error', 'Tanggal harus diisi');
                return;
            }

            const stockData = {
                date: date,
                shift: shift,
                fuji: {
                    plates: [],
                    chemicals: []
                },
                saphira: {
                    plates: [],
                    chemicals: []
                }
            };

            let hasData = false;
            let confirmationMessage = `Tanggal: ${date}\nShift: ${shift}\nBrand: ${brand}\n\nData Incoming:\n`;

            // Process Plates based on selected brand
            const platesTableId = (brand === 'fuji') ? '#fujiPlateIncomingTable' : '#saphiraPlateIncomingTable';
            document.querySelectorAll(`${platesTableId} tr[data-item-code]`).forEach(row => {
                const itemCode = row.dataset.itemCode;
                const pcsPerBox = parseInt(row.dataset.pcsPerBox) || 0;
                const boxInput = row.querySelector('.incoming-box-input');
                
                if (boxInput) {
                    const boxValue = parseInt(boxInput.value) || 0;
                    if (boxValue > 0) {
                        hasData = true;
                        const itemName = row.querySelector('td:first-child').textContent.trim();
                        
                        if (brand === 'fuji') {
                            stockData.fuji.plates.push({
                                item_code: itemCode,
                                item_name: itemName,
                                jumlah_incoming: boxValue * pcsPerBox,
                                jumlah_per_box: pcsPerBox
                            });
                        } else {
                            stockData.saphira.plates.push({
                                item_code: itemCode,
                                item_name: itemName,
                                jumlah_incoming: boxValue * pcsPerBox,
                                jumlah_per_box: pcsPerBox
                            });
                        }
                        confirmationMessage += `- ${itemName}: ${boxValue} Box\n`;
                    }
                }
            });

            // Process Chemicals based on selected brand
            const chemicalsTableId = (brand === 'fuji') ? '#fujiChemicalIncomingTable' : '#saphiraChemicalIncomingTable';
            document.querySelectorAll(`${chemicalsTableId} tr[data-item-code]`).forEach(row => {
                const itemCode = row.dataset.itemCode;
                const input = row.querySelector('.chemical-incoming-input');
                
                if (input) {
                    const value = parseInt(input.value) || 0;
                    if (value > 0) {
                        hasData = true;
                        const itemName = row.querySelector('td:first-child').textContent.trim();
                        
                        if (brand === 'fuji') {
                            stockData.fuji.chemicals.push({
                                item_code: itemCode,
                                item_name: itemName,
                                jumlah_incoming: value
                            });
                        } else {
                            stockData.saphira.chemicals.push({
                                item_code: itemCode,
                                item_name: itemName,
                                jumlah_incoming: value
                            });
                        }
                        confirmationMessage += `- ${itemName}: ${value} GLN\n`;
                    }
                }
            });

            if (!hasData) {
                alert("Tidak ada data yang diinput. Mohon isi minimal satu kolom.");
                return;
            }

            if (confirm(confirmationMessage)) {
                // Send to server
                fetch('/api/input-incoming-stock', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(stockData)
                })
                .then(response => {
                    if (response.ok) {
                        showToast('success', 'Stock incoming berhasil disimpan');
                        // Use Bootstrap's native method to hide the modal
                        const modal = bootstrap.Modal.getInstance(document.getElementById('incomingStockModal'));
                        if (modal) {
                            modal.hide();
                        }
                        updateData(); // Refresh the main table
                    } else {
                        throw new Error('Failed to save incoming stock');
                    }
                })
                .catch(error => {
                    console.error('Error saving incoming stock:', error);
                    showToast('error', 'Gagal menyimpan stock incoming');
                });
            }
        }
    });

    // Format tanggal dalam bahasa Indonesia
    const namaHari = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
    const namaBulan = ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'];

    function formatTanggal(date) {
        const hari = namaHari[date.getDay()];
        const tanggal = date.getDate();
        const bulan = namaBulan[date.getMonth()];
        const tahun = date.getFullYear();
        return `${hari}, ${tanggal} ${bulan} ${tahun}`;
    }

    // Set tanggal hari ini sebagai default
    window.onload = function() {
        const today = new Date();
        document.getElementById('stockDate').value = today.toISOString().split('T')[0];
        updateData();
    }

    // Show loading spinner function
    function showLoading() {
        const spinner = document.createElement('div');
        spinner.classList.add('spinner-overlay');
        spinner.innerHTML = `
            <div class="spinner-content">
                <div class="spinner-border text-primary mb-2" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <div>Loading data...</div>
            </div>
        `;
        document.body.appendChild(spinner);
    }

    // Hide loading spinner function
    function hideLoading() {
        const spinner = document.querySelector('.spinner-overlay');
        if (spinner) {
            spinner.remove();
        }
    }

    // Add this helper function
    function formatShift(shift) {
        return `Shift ${shift}`;
    }

    // Update the updateData function
    function updateData() {
        const selectedDate = new Date(document.getElementById('stockDate').value);
        const selectedShift = document.getElementById('shiftFilter').value;
        const formattedDate = formatTanggal(selectedDate);
        const formattedShift = formatShift(selectedShift);

        // Update tanggal dan shift display
        document.getElementById('fujiDateDisplay').textContent = formattedDate;
        document.getElementById('saphiraDateDisplay').textContent = formattedDate;
        document.getElementById('fujiShiftDisplay').textContent = formattedShift;
        document.getElementById('saphiraShiftDisplay').textContent = formattedShift;

        // Show loading spinner
        showLoading();

        // Ambil data dari server
        fetchStockData(selectedDate, selectedShift);
}

    // Fungsi untuk mengambil data stok dari server
    async function fetchStockData(date, shift) {
        try {
            const response = await fetch(`/api/kartu-stock?date=${date.toISOString().split('T')[0]}&shift=${shift}`);
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            const data = await response.json();
            
            if (data.error) {
                throw new Error(data.error);
            }
            
            updateTables(data);
        } catch (error) {
            console.error('Error fetching stock data:', error);
            if (error instanceof TypeError) {
                // Handle specific type errors more gracefully
                showToast('error', 'Struktur data stok tidak sesuai. Mohon hubungi administrator.');
            } else {
                showToast('error', 'Gagal mengambil data stok: ' + (error.message || 'Unknown error'));
            }
            
            // Set default empty state for tables
            const emptyData = {
                fuji: {
                    plate: { data: [] },
                    chemical: { data: [] }
                },
                saphira: {
                    plate: { data: [] },
                    chemical: { data: [] }
                }
            };
            updateTables(emptyData);
        } finally {
            // Hide loading spinner
            hideLoading();
        }
    }

    // Confirmation functions removed

    // Update tabel dengan data dari server
    function updateTables(data) {
        updateTableData('kartuStockPlateFujiTable', data.fuji.plate.data);
        updateTableData('kartuStockChemicalFujiTable', data.fuji.chemical.data);
        updateTableData('kartuStockPlateSaphiraTable', data.saphira.plate.data);
        updateTableData('kartuStockChemicalSaphiraTable', data.saphira.chemical.data);
    }

    function updateTableData(tableId, data) {
        const table = document.getElementById(tableId);
        const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');

        for (let row of rows) {
            const itemCode = row.getAttribute('data-item-code');
            const itemData = data.find(item => item.item_code === itemCode);
            
            if (itemData) {
                // Handle plate tables
                if (tableId === 'kartuStockPlateFujiTable' || tableId === 'kartuStockPlateSaphiraTable') {
                    // Stock Awal - Menggunakan nilai yang sudah dikonversi dari backend
                    if (itemData.jumlah_stock_awal_box !== undefined && itemData.jumlah_stock_awal_pcs !== undefined) {
                        row.querySelector('[data-field="jumlah_stock_awal_box"]').textContent = 
                            itemData.jumlah_stock_awal_box || 0;
                        row.querySelector('[data-field="jumlah_stock_awal_pcs"]').textContent = 
                            itemData.jumlah_stock_awal_pcs || 0;
                    } else {
                        row.querySelector('[data-field="jumlah_stock_awal_box"]').textContent = '0';
                        row.querySelector('[data-field="jumlah_stock_awal_pcs"]').textContent = '0';
                    }

                    // Stock Akhir - Menggunakan nilai yang sudah dikonversi dari backend
                    if (itemData.jumlah_stock_akhir_box !== undefined && itemData.jumlah_stock_akhir_pcs !== undefined) {
                        row.querySelector('[data-field="jumlah_stock_akhir_box"]').textContent = 
                            itemData.jumlah_stock_akhir_box || 0;
                        row.querySelector('[data-field="jumlah_stock_akhir_pcs"]').textContent = 
                            itemData.jumlah_stock_akhir_pcs || 0;
                    } else {
                        row.querySelector('[data-field="jumlah_stock_akhir_box"]').textContent = '0';
                        row.querySelector('[data-field="jumlah_stock_akhir_pcs"]').textContent = '0';
                    }

                    // Pemakaian (dalam pcs) dan Incoming (dalam box)
                    if (itemData.jumlah_pemakaian !== undefined && itemData.jumlah_pemakaian !== null) {
                        row.querySelector('[data-field="jumlah_pemakaian"]').textContent = 
                            parseInt(itemData.jumlah_pemakaian) || 0;
                    } else {
                        row.querySelector('[data-field="jumlah_pemakaian"]').textContent = '0';
                    }
                    
                    if (itemData.jumlah_incoming !== undefined && itemData.jumlah_incoming !== null) {
                        row.querySelector('[data-field="jumlah_incoming"]').textContent = 
                            parseInt(itemData.jumlah_incoming) || 0;
                    } else {
                        row.querySelector('[data-field="jumlah_incoming"]').textContent = '0';
                    }
                } 
                // Handle chemical tables (straight values)
                else if (tableId === 'kartuStockChemicalFujiTable' || tableId === 'kartuStockChemicalSaphiraTable') {
                    for (let cell of row.getElementsByTagName('td')) {
                        const field = cell.getAttribute('data-field');
                        if (field && itemData[field] !== undefined) {
                            cell.textContent = itemData[field];
                        }
                    }
                }
            }
        }
    }

    // Fungsi untuk menampilkan toast notification
    function showToast(type, message) {
        // Implementasi toast notification sesuai kebutuhan
        alert(message); // Sementara menggunakan alert biasa
    }   

    // Fungsi untuk menampilkan modal export
    function showExportModal() {
        // Implementasi modal export
        // Akan diimplementasikan sesuai kebutuhan
    }
</script>
</body>
</html>